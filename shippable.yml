language: java
jdk: oraclejdk8
install:
  - shippable_retry mvn install
stages:
  - build
  - test
  
build:
stage: build
script:
   - mvn compile
   - mkdir -p ct417/testResults
   - mkdir -p ct417/codeCoverage
   - cp -r target ct417/codeCoverage
   - mvn -Dtest=ModuleTest test
   - mvn -Dtest=StudentTest2 test
   - mvn -Dtest=CourseTest test
artifacts:
  paths:
      - target/surefire-reports/TEST-*.xml
  reports:
     junit:
       - target/surefire-reports/TEST-*.xml
  
test:
  stage: test
  script:
    - echo "testing"
    - mvn test